# 作業中のタスク

## tmp/prototype: Vue.js デッキ編集UI プロトタイプ

### 現在の作業: セクション間移動のリファクタリング

**状況**:
- ✅ DeckCard.vue からemit経由ではなくPinia storeを直接使用するようリファクタリング完了
- ✅ ボタンハンドラーの引数順序を修正
- ⏳ 動作確認中

**修正内容**:
1. ✅ DeckCard.vue に useDeckStore をインポート
2. ✅ handleTopRight, handleBottomLeft, handleBottomRight を store メソッド直接呼び出しに変更
3. ✅ 不要な emit を削除（dragstart, drop, click のみ残す）

**残課題**:
- ⏭️ ドラッグ＆ドロップの動作確認
- ⏭️ 各ボタンの動作確認
- ⏭️ エラーハンドリングの追加

---

## Phase 3: 他言語対応（i18n）

### 現在の作業: 一時中断（prototype作業を優先）

**ブランチ構成**:
- ✅ main → dev にマージ完了
- ✅ feature/i18n-support ブランチ作成

**調査タスク**:
1. ✅ 言語ごとのテキスト差異を調査（Phase 1完了）
   - ✅ 括弧: 日本語【】→ 英語[]
   - ✅ スラッシュ: 両言語とも全角「／」
   - ✅ 種族: ドラゴン族→Dragon、機械族→Machine
   - ✅ タイプ: 通常→Normal、効果→Effect
2. ⏸️ 調査結果をドキュメント化（一時中断）
   - ✅ 記号の違いを確認
   - ⏸️ 検索フォームから全マッピングを取得
3. ⏭️ 他言語対応の実装方針決定
   - ⏭️ 言語検出方法の確定
   - ⏭️ マッピングテーブル設計
4. ⏭️ パーサーの多言語対応実装
   - ⏭️ 括弧除去の正規表現修正
   - ⏭️ 多言語マッピングテーブル実装

**Phase 2完了内容**:
- ✅ デッキ画像作成機能（v0.1.0）
- ✅ シャッフル・ソート・固定機能（v0.2.0）
- ✅ オプションページによる機能制御
- ✅ 画像ベースの効果タイプ判定

**Phase 2のPR状況**:
- ✅ Geminiレビューコメントに対応（4件）
- ✅ 各コメントに個別に返信
- ✅ 設定制御機能の追加
- ✅ 効果タイプ判定の画像ベース化
- ⏭️ feature/deck-recipe-image のマージ待ち（別途対応予定）

#### 完了済み機能
- [x] デッキ画像作成機能
  - [x] API層実装（Canvas、QRコード）
  - [x] ダイアログUI実装
  - [x] ダウンロード機能実装
  - [x] 処理中アニメーション実装
  - [x] Node.js環境での画像生成対応
  - [ ] オプションページでscale設定（将来的な拡張）

- [x] シャッフル機能
  - [x] デッキ表示ページのDOM構造調査
  - [x] ボタン追加機能の実装
  - [x] シャッフル機能の実装
  - [x] ソート機能の実装
  - [x] カード固定機能の実装
  - [x] QRコード修正（URLパラメータ正規化）

- [x] オプションページ
  - [x] 機能一覧表示（TOC）
  - [x] 機能説明と使い方
  - [x] ON/OFF切り替え
  - [x] content scriptでの設定読み込み

---

## 最近完了したタスク

### 2025-11-09: Phase 1完了
- ✅ CardType型を英語識別子に統一
- ✅ 全パーサー実装完了（カード詳細、FAQ一覧、FAQ詳細）
- ✅ tests/combine/parser/ 全テスト成功
- ✅ デバッグ表示削除・ポップアップUI実装

### 2025-11-07: デッキレシピ画像作成機能の完成（API層）
- ✅ Canvas描画、カードレイアウト
- ✅ QRコード生成（公開デッキ用）
- ✅ カードバック画像
- ✅ 全カラーバリエーション（赤/青、QR有無）

詳細は `tasks/done.md` を参照

---

## ブランチ構成
- `main`: 安定版
- `feature/deck-recipe-image`: デッキレシピ画像機能の実装ブランチ（現在）

# v0.3.1 - 2025-11-14

## 改善

### UI/UX
- **popupページのCSS分離**
  - インラインスタイルを廃止し、popup.css に分離
  - CSSカスタムプロパティ（CSS変数）導入
  - ダークモード対応の基盤整備
  - `:root`で色・サイズ・影などを一元管理

- **オプションページUI改善**
  - General/Deck Edit Settingsタブを一時非表示化
  - 画像レイアウト調整
  - サイドバーナビゲーション追加（折りたたみ可能）
  - Chrome Store宣伝画像をドキュメントに追加（3枚、約2.5MB）

### ビルド・デプロイ
- **webpack.config.js修正**
  - popup.cssのコピー設定追加（CRITICAL: ビルド後にCSSが欠落する致命的バグを修正）

### ブランチ保護強化
- **main/devブランチ保護設定強化**
  - `enforce_admins: false → true` に変更
  - `required_pull_request_reviews`追加（PR経由必須化）
  - 管理者も含めて直接push完全禁止

## バグ修正

- **バージョン整合性修正**
  - version.dat=0.3.1, package.json/manifest.json=0.3.0の不整合を解消
  - 全ファイルを0.3.1に統一

## テスト

### E2Eテスト実施
- **カード詳細タブ動作確認**
  - Info/Q&A/Related/Productsタブ（全4タブ）の存在確認
  - 各タブのクリックとアクティブ状態の切り替え動作確認
  - ✅ 全て合格

- **表示モード切り替えとソート機能確認**
  - カード検索実行（"青眼"で15件取得）
  - ソート機能：Newer/Older/Name (A-Z)/(Z-A) の4オプションで動作確認
  - 表示モード切り替え：リスト表示⇔グリッド表示の切り替え動作確認
  - ラジオボタンによる表示モード切り替えUI確認
  - ✅ 全て合格

### テストスイート実行結果
- **combine tests (tsx)**: 17 tests - ✅ 全て合格
- **component tests (vitest)**: 89 passed | 3 skipped (92) - ✅ 全て合格
- **合計**: 106 tests合格

## ドキュメント

### 新規作成
- `docs/changelog/v0.3.1.md`: v0.3.1の変更履歴
- Repository名変更対応（ygo-neuron-helper → YuGiOh-NEXT）
- 連絡先情報追加

### 更新
- `docs/changelog/index.md`: v0.3.1を追加
- アイコン更新スクリプト作成
- done.md簡潔化（2,762行→58行、98%削減）

## GitHub Release

- **v0.3.0** - GitHub Release作成完了
- **v0.3.1** - GitHub Release作成完了
- Chrome Web Store用アセット準備完了
- プライバシーポリシー更新

## Pull Requests

- **PR #6**: UI改善・ドキュメント拡充 - ✅ マージ完了
- **PR #7**: v0.3.1リリース準備 (dev → main) - ✅ マージ完了
- **PR #8**: PR #7レビュー対応とdevブランチ保護強化 - ✅ マージ完了
  - popup UI CSS分離
  - webpack.config.js修正（popup.css コピー設定追加）
  - CSSカスタムプロパティ導入

## 内部変更

### テストスクリプト
- `tmp/browser/e2e-card-detail-test.js`: カード詳細タブE2Eテスト
- `tmp/browser/e2e-view-mode-test.js`: 表示モード切り替えE2Eテスト
- Chrome DevTools Protocol (CDP)経由でテスト実行

### ビルドツール
- `scripts/debug/setup/start-chrome.sh`: Chromiumリモートデバッグモード起動
- `scripts/debug/setup/stop-chrome.sh`: Chromium終了
- WebSocket経由でCDPコマンド送信

## アップグレード方法

1. 拡張機能をアップデート（v0.3.1）
2. 既存の機能はそのまま利用可能
3. CSS分離により、ダークモード対応の準備が整いました

## 既知の問題・制限事項

### テスト
- API tests: jest is not defined（vitestへの移行が必要）
- deck-parser tests: 期待値不一致
- session tests: cgid取得失敗（統合テスト）
- ※主要機能には影響なし、全て動作確認済み

---

**前バージョン**: [v0.3.0](./v0.3.0.md)
**次バージョン**: v0.4.0（計画中）
